<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Common/Login.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Common/Login.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module Login
 */
import { getDataFromCache } from './CacheManagement'

/**
 * It checks if the user has a cache, if so, it returns the page, if not, it
 * returns the auth page
 * @param page - The page you want to go to.
 * @param props - The props of the page you're on.
 * @returns The page that the user is on.
 */
export function authWithCache(setUserInformation, props) {
    var cacheData = getDataFromCache("area");
    if (cacheData !== undefined &amp;&amp; cacheData.mail !== undefined &amp;&amp; cacheData.id !== undefined &amp;&amp; cacheData.password !== undefined) {
        const requestOptions = {
            method: 'POST',
            mode: 'cors',
            headers: {
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            },
            body: JSON.stringify({ email: cacheData.mail, password: cacheData.password })
        }
        try {
            fetch(cacheData.ip + "/login", requestOptions).then(response => {
                response.json().then(data => {
                    console.log(data);
                    setUserInformation({
                        mail: cacheData.mail,
                        locationAccept: props.userInformation.locationAccept,
                        coord: {
                            latitude: props.userInformation.coord.latitude,
                            longitude: props.userInformation.coord.longitude,
                            city: props.userInformation.coord.city
                        },
                        id: data.userUid,
                        services: {
                            spotifyId: props.userInformation.services.spotifyId,
                            googleId: props.userInformation.services.googleId,
                            twitterId: props.userInformation.services.twitterId,
                            twitchId: props.userInformation.services.twitchId,
                            stravaId: props.userInformation.services.stravaId
                        },
                        ip: cacheData.ip
                    }
                    )
                })
            })
        } catch (error) {
            console.log(error);
        }
    } else {
        console.log("no cache");
        throw new Error("no cache");
    }
    console.log("cache loaded")
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-AddAreaPage.html">AddAreaPage</a></li><li><a href="module-App.html">App</a></li><li><a href="module-AuthPage.html">AuthPage</a></li><li><a href="module-CacheManagement.html">CacheManagement</a></li><li><a href="module-HomePage.html">HomePage</a></li><li><a href="module-index.html">index</a></li><li><a href="module-Loading.html">Loading</a></li><li><a href="module-Login.html">Login</a></li><li><a href="module-SettingsPage.html">SettingsPage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Mon Feb 27 2023 19:45:25 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
